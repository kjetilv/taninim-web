import{s as we,A as Je,e as Z,i as L,y as ge,d as _,f as g,a as D,g as k,B as he,c as S,h as z,j as E,C as Ae,l as I,m as C,D as Oe,k as ye,x as h,E as de,n as P,F as qe,G as It,H as Lt,o as Ct,p as be,I as pe,J as Ye,K as Ke}from"../chunks/scheduler.b63a5fee.js";import{S as ze,i as Le,f as ve,b as Ne,d as De,m as Se,a as Me,t as je,e as Ve}from"../chunks/index.bc76f87e.js";function $(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Tt(n,e,l){const t=Je();let{authorization:i=!1}=e,{endpoint:s}=e;const a=r=>t("receivedAlbum",r),o=async()=>{a({__clear:!0});let r;try{let f=`${s}/library.json?t=${i.token}`;r=await fetch(f)}catch(f){return a({__error:!0,error:f})}if((r==null?void 0:r.status)>=300)return a({__error:!0,error:r.body});if(r!=null&&r.body){let f=r.body.pipeThrough(new TextDecoderStream).getReader(),u=!1,b=!0;do{const{value:c,done:d}=await f.read();if(d)a({__done:!0}),b=!1;else{let p=c.split(`
`);u&&(p[0]=u+p[0],u=!1);for(const y of p)if(y&&y.length&&y.length>0)try{a(JSON.parse(y))}catch{if(u)throw`Already had lastline = ${u}`;u=y}}}while(b)}else a({__error:!0,error:r})};return n.$$set=r=>{"authorization"in r&&l(0,i=r.authorization),"endpoint"in r&&l(1,s=r.endpoint)},n.$$.update=()=>{n.$$.dirty&1&&i&&o()},l(0,i=!1),[i,s]}class Nt extends ze{constructor(e){super(),Le(this,e,Tt,null,we,{authorization:0,endpoint:1})}}function Qe(n,e,l){const t=n.slice();return t[13]=e[l],t[15]=l,t}function We(n,e,l){const t=n.slice();return t[18]=e[l],t[15]=l,t}function Xe(n,e,l){const t=n.slice();return t[16]=e[l],t[15]=l,t}function Ze(n,e,l){const t=n.slice();return t[16]=e[l],t[15]=l,t}function $e(n){let e,l="Playable albums",t,i,s,a,o=$(n[0]),r=[];for(let f=0;f<o.length;f+=1)r[f]=lt(Qe(n,o,f));return{c(){e=g("h1"),e.textContent=l,t=D(),i=g("br"),s=D(),a=g("div");for(let f=0;f<r.length;f+=1)r[f].c();this.h()},l(f){e=k(f,"H1",{"data-svelte-h":!0}),he(e)!=="svelte-1dtu78o"&&(e.textContent=l),t=S(f),i=k(f,"BR",{}),s=S(f),a=k(f,"DIV",{tabindex:!0,class:!0});var u=z(a);for(let b=0;b<r.length;b+=1)r[b].l(u);u.forEach(_),this.h()},h(){E(a,"tabindex","0"),E(a,"class","collapse collapse-arrow")},m(f,u){L(f,e,u),L(f,t,u),L(f,i,u),L(f,s,u),L(f,a,u);for(let b=0;b<r.length;b+=1)r[b]&&r[b].m(a,null)},p(f,u){if(u&7){o=$(f[0]);let b;for(b=0;b<o.length;b+=1){const c=Qe(f,o,b);r[b]?r[b].p(c,u):(r[b]=lt(c),r[b].c(),r[b].m(a,null))}for(;b<r.length;b+=1)r[b].d(1);r.length=o.length}},d(f){f&&(_(e),_(t),_(i),_(s),_(a)),Ae(r,f)}}}function Dt(n){let e,l=$(n[13].sections),t=[];for(let i=0;i<l.length;i+=1)t[i]=et(We(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Z()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);e=Z()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);L(i,e,s)},p(i,s){if(s&3){l=$(i[13].sections);let a;for(a=0;a<l.length;a+=1){const o=We(i,l,a);t[a]?t[a].p(o,s):(t[a]=et(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(i){i&&_(e),Ae(t,i)}}}function St(n){let e,l=$(n[13].sections.flatMap(it)),t=[];for(let i=0;i<l.length;i+=1)t[i]=tt(Ze(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Z()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);e=Z()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);L(i,e,s)},p(i,s){if(s&3){l=$(i[13].sections.flatMap(it));let a;for(a=0;a<l.length;a+=1){const o=Ze(i,l,a);t[a]?t[a].p(o,s):(t[a]=tt(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(i){i&&_(e),Ae(t,i)}}}function xe(n){let e,l,t=n[16].no+"",i,s,a=n[16].name+"",o,r,f;function u(){return n[8](n[13],n[16])}function b(){return n[9](n[13],n[16])}return{c(){e=g("li"),l=g("a"),i=I(t),s=I(". "),o=I(a)},l(c){e=k(c,"LI",{});var d=z(e);l=k(d,"A",{});var p=z(l);i=C(p,t),s=C(p,". "),o=C(p,a),p.forEach(_),d.forEach(_)},m(c,d){L(c,e,d),h(e,l),h(l,i),h(l,s),h(l,o),r||(f=[de(e,"click",u),de(e,"keypress",b)],r=!0)},p(c,d){n=c,d&1&&t!==(t=n[16].no+"")&&P(i,t),d&1&&a!==(a=n[16].name+"")&&P(o,a)},d(c){c&&_(e),r=!1,qe(f)}}}function et(n){let e,l=n[18].name+"",t,i,s,a=$(n[18].tracks),o=[];for(let r=0;r<a.length;r+=1)o[r]=xe(Xe(n,a,r));return{c(){e=g("li"),t=I(l),i=D();for(let r=0;r<o.length;r+=1)o[r].c();s=Z()},l(r){e=k(r,"LI",{});var f=z(e);t=C(f,l),f.forEach(_),i=S(r);for(let u=0;u<o.length;u+=1)o[u].l(r);s=Z()},m(r,f){L(r,e,f),h(e,t),L(r,i,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(r,f);L(r,s,f)},p(r,f){if(f&1&&l!==(l=r[18].name+"")&&P(t,l),f&3){a=$(r[18].tracks);let u;for(u=0;u<a.length;u+=1){const b=Xe(r,a,u);o[u]?o[u].p(b,f):(o[u]=xe(b),o[u].c(),o[u].m(s.parentNode,s))}for(;u<o.length;u+=1)o[u].d(1);o.length=a.length}},d(r){r&&(_(e),_(i),_(s)),Ae(o,r)}}}function tt(n){let e,l,t=n[16].no+"",i,s,a=n[16].name+"",o,r,f;function u(){return n[6](n[13],n[16])}function b(){return n[7](n[13],n[16])}return{c(){e=g("li"),l=g("a"),i=I(t),s=I(". "),o=I(a)},l(c){e=k(c,"LI",{});var d=z(e);l=k(d,"A",{});var p=z(l);i=C(p,t),s=C(p,". "),o=C(p,a),p.forEach(_),d.forEach(_)},m(c,d){L(c,e,d),h(e,l),h(l,i),h(l,s),h(l,o),r||(f=[de(e,"click",u),de(e,"keypress",b)],r=!0)},p(c,d){n=c,d&1&&t!==(t=n[16].no+"")&&P(i,t),d&1&&a!==(a=n[16].name+"")&&P(o,a)},d(c){c&&_(e),r=!1,qe(f)}}}function lt(n){let e,l,t,i,s,a,o,r,f=n[13].artist+"",u,b,c=n[13].name+"",d,p,y=n[13].year+"",m,A,T,M,U=n[13].artists.map(nt).join(", ")+"",J,ne,Q,G,H,oe="Songs",te,O,q,j,w,V="Listen",F,Y,ue="Release",ie,ae,ke;function ce(re,W){var _e;return((_e=re[13].sections)==null?void 0:_e.length)===1?St:Dt}let fe=ce(n),x=fe(n);function ee(){return n[10](n[13])}function K(){return n[11](n[13])}return{c(){e=g("div"),l=g("figure"),t=g("img"),a=D(),o=g("div"),r=g("h2"),u=I(f),b=I(": "),d=I(c),p=I(" ("),m=I(y),A=I(")"),T=D(),M=g("p"),J=I(U),ne=D(),Q=g("div"),G=g("div"),H=g("label"),H.textContent=oe,te=D(),O=g("ul"),x.c(),q=D(),j=g("div"),w=g("button"),w.textContent=V,F=D(),Y=g("button"),Y.textContent=ue,ie=D(),this.h()},l(re){e=k(re,"DIV",{class:!0});var W=z(e);l=k(W,"FIGURE",{});var _e=z(l);t=k(_e,"IMG",{class:!0,src:!0,alt:!0}),_e.forEach(_),a=S(W),o=k(W,"DIV",{class:!0});var X=z(o);r=k(X,"H2",{class:!0});var N=z(r);u=C(N,f),b=C(N,": "),d=C(N,c),p=C(N," ("),m=C(N,y),A=C(N,")"),N.forEach(_),T=S(X),M=k(X,"P",{});var R=z(M);J=C(R,U),R.forEach(_),ne=S(X),Q=k(X,"DIV",{style:!0});var se=z(Q);G=k(se,"DIV",{class:!0});var Ee=z(G);H=k(Ee,"LABEL",{tabindex:!0,class:!0,style:!0,"data-svelte-h":!0}),he(H)!=="svelte-1cmut0a"&&(H.textContent=oe),te=S(Ee),O=k(Ee,"UL",{tabindex:!0,class:!0});var le=z(O);x.l(le),le.forEach(_),Ee.forEach(_),se.forEach(_),q=S(X),j=k(X,"DIV",{class:!0});var me=z(j);w=k(me,"BUTTON",{class:!0,"data-svelte-h":!0}),he(w)!=="svelte-16q4j4t"&&(w.textContent=V),F=S(me),Y=k(me,"BUTTON",{class:!0,"data-svelte-h":!0}),he(Y)!=="svelte-19su3j1"&&(Y.textContent=ue),me.forEach(_),X.forEach(_),ie=S(W),W.forEach(_),this.h()},h(){E(t,"class","mask mask-hexagon"),Oe(t.src,i=n[13].discogImage)||E(t,"src",i),E(t,"alt",s=n[13].name),E(r,"class","card-title"),E(H,"tabindex","0"),E(H,"class","btn m-1"),ye(H,"width","95%"),ye(H,"alignment","center"),E(O,"tabindex","0"),E(O,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"),E(G,"class","dropdown dropdown-top"),ye(Q,"float","right"),E(w,"class","btn btn-primary"),E(Y,"class","btn btn-primary"),E(j,"class","card-actions justify-end"),E(o,"class","card-body"),E(e,"class","card lg:card-side bg-base-50 shadow-xl")},m(re,W){L(re,e,W),h(e,l),h(l,t),h(e,a),h(e,o),h(o,r),h(r,u),h(r,b),h(r,d),h(r,p),h(r,m),h(r,A),h(o,T),h(o,M),h(M,J),h(o,ne),h(o,Q),h(Q,G),h(G,H),h(G,te),h(G,O),x.m(O,null),h(o,q),h(o,j),h(j,w),h(j,F),h(j,Y),h(e,ie),ae||(ke=[de(w,"click",ee),de(Y,"click",K)],ae=!0)},p(re,W){n=re,W&1&&!Oe(t.src,i=n[13].discogImage)&&E(t,"src",i),W&1&&s!==(s=n[13].name)&&E(t,"alt",s),W&1&&f!==(f=n[13].artist+"")&&P(u,f),W&1&&c!==(c=n[13].name+"")&&P(d,c),W&1&&y!==(y=n[13].year+"")&&P(m,y),W&1&&U!==(U=n[13].artists.map(nt).join(", ")+"")&&P(J,U),fe===(fe=ce(n))&&x?x.p(n,W):(x.d(1),x=fe(n),x&&(x.c(),x.m(O,null)))},d(re){re&&_(e),x.d(),ae=!1,qe(ke)}}}function Mt(n){var t;let e,l=((t=n[0])==null?void 0:t.length)&&$e(n);return{c(){l&&l.c(),e=Z()},l(i){l&&l.l(i),e=Z()},m(i,s){l&&l.m(i,s),L(i,e,s)},p(i,[s]){var a;(a=i[0])!=null&&a.length?l?l.p(i,s):(l=$e(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:ge,o:ge,d(i){i&&_(e),l&&l.d(i)}}}const nt=n=>n.name,it=n=>n.tracks;function jt(n,e,l){const t=Je();let{endpoint:i}=e,{receivedAlbums:s}=e,{playableAlbums:a}=e,{authorization:o=!1}=e;const r=(m,A)=>A&&t("trackSelected",{album:m,track:A}),f=m=>{try{fetch(`${i}/lease`,{method:"DELETE",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o.userId,token:o.token,album:m.uuid})}).then(async A=>{(A==null?void 0:A.status)<300?t("albumDismissed",{album:m}):t("requestedAlbum",{__error:!0,error:A})})}catch(A){return t("requestedAlbum",{__error:!0,error:A})}},u=(m,A)=>r(m,A),b=(m,A)=>r(m,A),c=(m,A)=>r(m,A),d=(m,A)=>r(m,A),p=m=>{var A,T,M;return r(m,(M=(T=(A=m.sections)==null?void 0:A.at(0))==null?void 0:T.tracks)==null?void 0:M.at(0))},y=m=>f(m);return n.$$set=m=>{"endpoint"in m&&l(3,i=m.endpoint),"receivedAlbums"in m&&l(4,s=m.receivedAlbums),"playableAlbums"in m&&l(0,a=m.playableAlbums),"authorization"in m&&l(5,o=m.authorization)},n.$$.update=()=>{n.$$.dirty&32},[a,r,f,i,s,o,u,b,c,d,p,y]}class Vt extends ze{constructor(e){super(),Le(this,e,jt,Mt,we,{endpoint:3,receivedAlbums:4,playableAlbums:0,authorization:5})}}function at(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function rt(n,e,l){const t=n.slice();return t[6]=e[l],t[17]=l,t}function st(n,e,l){const t=n.slice();return t[13]=e[l],t[15]=l,t}function ot(n,e,l){const t=n.slice();return t[13]=e[l],t[15]=l,t}function ut(n){let e,l="Library",t,i,s,a,o,r="<tr><th>Album</th> <th>Artist</th> <th>Year</th> <th></th></tr>",f,u,b,c,d="<tr><th>Album</th> <th>Artist</th> <th>Year</th></tr>",p=$(n[0]),y=[];for(let m=0;m<p.length;m+=1)y[m]=dt(at(n,p,m));return{c(){e=g("h1"),e.textContent=l,t=D(),i=g("br"),s=D(),a=g("table"),o=g("thead"),o.innerHTML=r,f=D(),u=g("tbody");for(let m=0;m<y.length;m+=1)y[m].c();b=D(),c=g("tfoot"),c.innerHTML=d,this.h()},l(m){e=k(m,"H1",{"data-svelte-h":!0}),he(e)!=="svelte-gc35fn"&&(e.textContent=l),t=S(m),i=k(m,"BR",{}),s=S(m),a=k(m,"TABLE",{class:!0});var A=z(a);o=k(A,"THEAD",{"data-svelte-h":!0}),he(o)!=="svelte-16f3c7y"&&(o.innerHTML=r),f=S(A),u=k(A,"TBODY",{});var T=z(u);for(let M=0;M<y.length;M+=1)y[M].l(T);T.forEach(_),b=S(A),c=k(A,"TFOOT",{"data-svelte-h":!0}),he(c)!=="svelte-166n1rl"&&(c.innerHTML=d),A.forEach(_),this.h()},h(){E(a,"class","table table-compact w-full")},m(m,A){L(m,e,A),L(m,t,A),L(m,i,A),L(m,s,A),L(m,a,A),h(a,o),h(a,f),h(a,u);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(u,null);h(a,b),h(a,c)},p(m,A){if(A&127){p=$(m[0]);let T;for(T=0;T<p.length;T+=1){const M=at(m,p,T);y[T]?y[T].p(M,A):(y[T]=dt(M),y[T].c(),y[T].m(u,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=p.length}},d(m){m&&(_(e),_(t),_(i),_(s),_(a)),Ae(y,m)}}}function Pt(n){let e,l=$(n[1](n[10])),t=[];for(let i=0;i<l.length;i+=1)t[i]=ft(rt(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Z()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);e=Z()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);L(i,e,s)},p(i,s){if(s&15){l=$(i[1](i[10]));let a;for(a=0;a<l.length;a+=1){const o=rt(i,l,a);t[a]?t[a].p(o,s):(t[a]=ft(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(i){i&&_(e),Ae(t,i)}}}function Ut(n){let e,l=$(n[2](n[6](n[10]))),t=[];for(let i=0;i<l.length;i+=1)t[i]=ht(ot(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Z()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);e=Z()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);L(i,e,s)},p(i,s){if(s&77){l=$(i[2](i[6](i[10])));let a;for(a=0;a<l.length;a+=1){const o=ot(i,l,a);t[a]?t[a].p(o,s):(t[a]=ht(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(i){i&&_(e),Ae(t,i)}}}function ct(n){let e,l,t,i=n[13].no+"",s,a,o,r,f=n[13].name+"",u,b,c,d=n[3](n[13])+"",p;return{c(){e=g("li"),l=I("  "),t=g("span"),s=I(i),a=I("."),o=D(),r=g("span"),u=I(f),b=D(),c=g("span"),p=I(d),this.h()},l(y){e=k(y,"LI",{});var m=z(e);l=C(m,"  "),t=k(m,"SPAN",{class:!0});var A=z(t);s=C(A,i),a=C(A,"."),A.forEach(_),o=S(m),r=k(m,"SPAN",{class:!0});var T=z(r);u=C(T,f),T.forEach(_),b=S(m),c=k(m,"SPAN",{class:!0});var M=z(c);p=C(M,d),M.forEach(_),m.forEach(_),this.h()},h(){E(t,"class","font-thin"),E(r,"class","font-bold"),E(c,"class","font-thin")},m(y,m){L(y,e,m),h(e,l),h(e,t),h(t,s),h(t,a),h(e,o),h(e,r),h(r,u),h(e,b),h(e,c),h(c,p)},p(y,m){m&1&&i!==(i=y[13].no+"")&&P(s,i),m&1&&f!==(f=y[13].name+"")&&P(u,f),m&1&&d!==(d=y[3](y[13])+"")&&P(p,d)},d(y){y&&_(e)}}}function ft(n){var f;let e,l,t=(((f=n[6].name)==null?void 0:f.trim())||"Disc "+(n[17]+1))+"",i,s,a,o=$(n[2](n[6])),r=[];for(let u=0;u<o.length;u+=1)r[u]=ct(st(n,o,u));return{c(){e=g("li"),l=g("span"),i=I(t),s=D();for(let u=0;u<r.length;u+=1)r[u].c();a=Z(),this.h()},l(u){e=k(u,"LI",{});var b=z(e);l=k(b,"SPAN",{class:!0});var c=z(l);i=C(c,t),c.forEach(_),b.forEach(_),s=S(u);for(let d=0;d<r.length;d+=1)r[d].l(u);a=Z(),this.h()},h(){E(l,"class","font-thin")},m(u,b){L(u,e,b),h(e,l),h(l,i),L(u,s,b);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(u,b);L(u,a,b)},p(u,b){var c;if(b&1&&t!==(t=(((c=u[6].name)==null?void 0:c.trim())||"Disc "+(u[17]+1))+"")&&P(i,t),b&15){o=$(u[2](u[6]));let d;for(d=0;d<o.length;d+=1){const p=st(u,o,d);r[d]?r[d].p(p,b):(r[d]=ct(p),r[d].c(),r[d].m(a.parentNode,a))}for(;d<r.length;d+=1)r[d].d(1);r.length=o.length}},d(u){u&&(_(e),_(s),_(a)),Ae(r,u)}}}function ht(n){let e,l,t,i=n[13].no+"",s,a,o,r,f=n[13].name+"",u,b,c,d=n[3](n[13])+"",p;return{c(){e=g("li"),l=I("  "),t=g("span"),s=I(i),a=I("."),o=D(),r=g("span"),u=I(f),b=D(),c=g("span"),p=I(d),this.h()},l(y){e=k(y,"LI",{});var m=z(e);l=C(m,"  "),t=k(m,"SPAN",{class:!0});var A=z(t);s=C(A,i),a=C(A,"."),A.forEach(_),o=S(m),r=k(m,"SPAN",{class:!0});var T=z(r);u=C(T,f),T.forEach(_),b=S(m),c=k(m,"SPAN",{class:!0});var M=z(c);p=C(M,d),M.forEach(_),m.forEach(_),this.h()},h(){E(t,"class","font-thin"),E(r,"class","font-bold"),E(c,"class","font-thin")},m(y,m){L(y,e,m),h(e,l),h(e,t),h(t,s),h(t,a),h(e,o),h(e,r),h(r,u),h(e,b),h(e,c),h(c,p)},p(y,m){m&1&&i!==(i=y[13].no+"")&&P(s,i),m&1&&f!==(f=y[13].name+"")&&P(u,f),m&1&&d!==(d=y[3](y[13])+"")&&P(p,d)},d(y){y&&_(e)}}}function dt(n){let e,l,t,i,s=n[10].name+"",a,o,r,f,u,b,c,d=n[4](n[10],30)+"",p,y,m,A=(n[10].year||"")+"",T,M,U,J,ne="R",Q,G,H;function oe(q,j){return j&1&&(u=null),u==null&&(u=q[1](q[10]).length===1),u?Ut:Pt}let te=oe(n,-1),O=te(n);return{c(){e=g("tr"),l=g("td"),t=g("div"),i=g("div"),a=I(s),o=D(),r=g("div"),f=g("ul"),O.c(),b=D(),c=g("td"),p=I(d),y=D(),m=g("td"),T=I(A),M=D(),U=g("td"),J=g("button"),J.textContent=ne,Q=D(),this.h()},l(q){e=k(q,"TR",{});var j=z(e);l=k(j,"TD",{});var w=z(l);t=k(w,"DIV",{tabindex:!0,class:!0});var V=z(t);i=k(V,"DIV",{class:!0});var F=z(i);a=C(F,s),F.forEach(_),o=S(V),r=k(V,"DIV",{class:!0});var Y=z(r);f=k(Y,"UL",{});var ue=z(f);O.l(ue),ue.forEach(_),Y.forEach(_),V.forEach(_),w.forEach(_),b=S(j),c=k(j,"TD",{});var ie=z(c);p=C(ie,d),ie.forEach(_),y=S(j),m=k(j,"TD",{style:!0});var ae=z(m);T=C(ae,A),ae.forEach(_),M=S(j),U=k(j,"TD",{});var ke=z(U);J=k(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),he(J)!=="svelte-emsno9"&&(J.textContent=ne),ke.forEach(_),Q=S(j),j.forEach(_),this.h()},h(){E(i,"class","collapse-title font-small"),E(r,"class","collapse-content"),E(t,"tabindex","0"),E(t,"class","collapse collapse-arrow border border-base-100 bg-base-100 rounded-box"),ye(m,"align-items","end"),E(J,"class","btn w-10 rounded")},m(q,j){L(q,e,j),h(e,l),h(l,t),h(t,i),h(i,a),h(t,o),h(t,r),h(r,f),O.m(f,null),h(e,b),h(e,c),h(c,p),h(e,y),h(e,m),h(m,T),h(e,M),h(e,U),h(U,J),h(e,Q),G||(H=de(J,"click",function(){It(n[5](n[10]))&&n[5](n[10]).apply(this,arguments)}),G=!0)},p(q,j){n=q,j&1&&s!==(s=n[10].name+"")&&P(a,s),te===(te=oe(n,j))&&O?O.p(n,j):(O.d(1),O=te(n),O&&(O.c(),O.m(f,null))),j&1&&d!==(d=n[4](n[10],30)+"")&&P(p,d),j&1&&A!==(A=(n[10].year||"")+"")&&P(T,A)},d(q){q&&_(e),O.d(),G=!1,H()}}}function Bt(n){var t;let e,l=((t=n[0])==null?void 0:t.length)&&ut(n);return{c(){e=g("div"),l&&l.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=z(e);l&&l.l(s),s.forEach(_),this.h()},h(){E(e,"class","overflow-x-auto")},m(i,s){L(i,e,s),l&&l.m(e,null)},p(i,[s]){var a;(a=i[0])!=null&&a.length?l?l.p(i,s):(l=ut(i),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:ge,o:ge,d(i){i&&_(e),l&&l.d()}}}function Ht(n,e,l){const t=Je();let{endpoint:i}=e,{receivedAlbums:s}=e,{authorization:a=!1}=e;const o=d=>d.sections||[],r=d=>d.sections[0],f=d=>d.tracks||[],u=({seconds:d})=>Math.floor(d/60)+":"+d%60,b=({artist:d},p)=>d.length>p?d.substring(0,Math.min(p-1,d.length))+"⋯":d,c=d=>{try{fetch(`${i}/lease`,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.userId,token:a.token,album:d.uuid})}).then(async p=>{(p==null?void 0:p.status)<300?t("rentedAlbum",{album:d}):t("requestedAlbum",{__error:!0,error:p})})}catch(p){return t("requestedAlbum",{__error:!0,error:p})}};return n.$$set=d=>{"endpoint"in d&&l(7,i=d.endpoint),"receivedAlbums"in d&&l(0,s=d.receivedAlbums),"authorization"in d&&l(8,a=d.authorization)},n.$$.update=()=>{n.$$.dirty&256},[s,o,f,u,b,c,r,i,a]}class Ot extends ze{constructor(e){super(),Le(this,e,Ht,Bt,we,{endpoint:7,receivedAlbums:0,authorization:8})}}function Rt(n){var o;let e,l=(((o=n[1])==null?void 0:o.length)||0)+"",t,i,s=n[0].length+"",a;return{c(){e=g("span"),t=I(l),i=I("/"),a=I(s)},l(r){e=k(r,"SPAN",{});var f=z(e);t=C(f,l),i=C(f,"/"),a=C(f,s),f.forEach(_)},m(r,f){L(r,e,f),h(e,t),h(e,i),h(e,a)},p(r,[f]){var u;f&2&&l!==(l=(((u=r[1])==null?void 0:u.length)||0)+"")&&P(t,l),f&1&&s!==(s=r[0].length+"")&&P(a,s)},i:ge,o:ge,d(r){r&&_(e)}}}function qt(n,e,l){let{receivedAlbums:t}=e,{playableAlbums:i}=e;return n.$$set=s=>{"receivedAlbums"in s&&l(0,t=s.receivedAlbums),"playableAlbums"in s&&l(1,i=s.playableAlbums)},n.$$.update=()=>{n.$$.dirty&1,n.$$.dirty&2},[t,i]}class Ft extends ze{constructor(e){super(),Le(this,e,qt,Rt,we,{receivedAlbums:0,playableAlbums:1})}}function _t(n){let e,l="Reload",t,i;return{c(){e=g("button"),e.textContent=l,this.h()},l(s){e=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),he(e)!=="svelte-kedt3z"&&(e.textContent=l),this.h()},h(){E(e,"class","btn w-16 rounded")},m(s,a){L(s,e,a),t||(i=de(e,"click",n[1]),t=!0)},p:ge,d(s){s&&_(e),t=!1,i()}}}function Jt(n){var d;let e,l="",t,i,s,a,o=(((d=n[0])==null?void 0:d.name)||"Connect")+"",r,f,u,b,c=n[0]&&_t(n);return{c(){e=g("script"),e.innerHTML=l,i=D(),s=g("div"),a=g("span"),r=I(o),f=D(),c&&c.c(),this.h()},l(p){const y=Lt("svelte-1j13wsj",document.head);e=k(y,"SCRIPT",{crossorigin:!0,src:!0,nonce:!0,id:!0,"data-svelte-h":!0}),he(e)!=="svelte-c051xy"&&(e.innerHTML=l),y.forEach(_),i=S(p),s=k(p,"DIV",{});var m=z(s);a=k(m,"SPAN",{class:!0});var A=z(a);r=C(A,o),A.forEach(_),f=S(m),c&&c.l(m),m.forEach(_),this.h()},h(){e.async=!0,e.defer=!0,E(e,"crossorigin","anonymous"),Oe(e.src,t="https://connect.facebook.net/nn_NO/sdk.js#xfbml=1&version=v15.0&appId=398404340829160&autoLogAppEvents=1")||E(e,"src",t),E(e,"nonce","fkQG4DTw"),E(e,"id","fb-loader"),E(a,"class","spn")},m(p,y){h(document.head,e),L(p,i,y),L(p,s,y),h(s,a),h(a,r),h(s,f),c&&c.m(s,null),u||(b=de(a,"click",n[2]),u=!0)},p(p,[y]){var m;y&1&&o!==(o=(((m=p[0])==null?void 0:m.name)||"Connect")+"")&&P(r,o),p[0]?c?c.p(p,y):(c=_t(p),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},i:ge,o:ge,d(p){p&&(_(i),_(s)),_(e),c&&c.d(),u=!1,b()}}}function Gt(n,e,l){let{endpoint:t}=e;const i=Je();let s="",{authorization:a=!1}=e;const o=(c,d,p,y)=>{fetch(`${t}/auth`,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(async m=>{var J;const A=m.status,M=(J=m.headers.get("content-type"))==null?void 0:J.includes("application/json"),U=M&&await m.json();m.ok&&M?d(A,U):p(A,U&&U.message||m.status)}).catch(m=>{y(m)})},r=c=>{c&&c.status?(l(4,s=c.status),s==="connected"&&c.authResponse?o(c.authResponse,(d,p)=>i("taninimAuthorization",p),(d,p)=>i("taninimUnauthorized",p),d=>i("taninimUnavailable",d)):i("taninimNotConnected",c)):i("taninimNotConnected",c)},f=()=>FB.getLoginStatus(r),u=()=>FB.login(r,{scope:"public_profile, email"}),b=()=>{a?f():u()};return Ct(f),n.$$set=c=>{"endpoint"in c&&l(3,t=c.endpoint),"authorization"in c&&l(0,a=c.authorization)},n.$$.update=()=>{n.$$.dirty&16},[a,f,b,t,s]}class Yt extends ze{constructor(e){super(),Le(this,e,Gt,Jt,we,{endpoint:3,authorization:0})}}function mt(n,e,l){const t=n.slice();return t[13]=e[l],t[12]=l,t}function bt(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function pt(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function vt(n){let e,l,t=n[1].name+"",i,s,a=n[1].year+"",o,r,f,u,b,c,d=n[1].name+"",p,y,m=n[1].year+"",A,T,M,U,J,ne,Q=n[1].obi+"",G,H,oe,te,O=n[1].series.flatMap(At).join(", ")+"",q,j,w,V,F=n[0].no+"",Y,ue,ie=n[0].name+"",ae,ke,ce,fe,x,ee,K,re;function W(N,R){var se;return((se=N[1].sections)==null?void 0:se.length)===1?Qt:Kt}let _e=W(n),X=_e(n);return{c(){e=g("div"),l=g("label"),i=I(t),s=I(" ("),o=I(a),r=I(")"),f=D(),u=g("ul"),b=g("li"),c=g("a"),p=I(d),y=I(" ("),A=I(m),T=I(")"),U=D(),J=g("br"),ne=D(),G=I(Q),H=D(),oe=g("br"),te=I(`
                Series: `),q=I(O),j=D(),w=g("div"),V=g("label"),Y=I(F),ue=I(". "),ae=I(ie),ke=D(),ce=g("ul"),X.c(),fe=D(),x=g("div"),ee=g("audio"),this.h()},l(N){e=k(N,"DIV",{class:!0,style:!0});var R=z(e);l=k(R,"LABEL",{tabindex:!0,class:!0,style:!0});var se=z(l);i=C(se,t),s=C(se," ("),o=C(se,a),r=C(se,")"),se.forEach(_),f=S(R),u=k(R,"UL",{tabindex:!0,class:!0});var Ee=z(u);b=k(Ee,"LI",{});var le=z(b);c=k(le,"A",{href:!0,target:!0});var me=z(c);p=C(me,d),y=C(me," ("),A=C(me,m),T=C(me,")"),me.forEach(_),U=S(le),J=k(le,"BR",{}),ne=S(le),G=C(le,Q),H=S(le),oe=k(le,"BR",{}),te=C(le,`
                Series: `),q=C(le,O),le.forEach(_),Ee.forEach(_),R.forEach(_),j=S(N),w=k(N,"DIV",{class:!0,style:!0});var Pe=z(w);V=k(Pe,"LABEL",{tabindex:!0,class:!0,style:!0});var Ue=z(V);Y=C(Ue,F),ue=C(Ue,". "),ae=C(Ue,ie),Ue.forEach(_),ke=S(Pe),ce=k(Pe,"UL",{tabindex:!0,class:!0});var Ie=z(ce);X.l(Ie),Ie.forEach(_),Pe.forEach(_),fe=S(N),x=k(N,"DIV",{});var v=z(x);ee=k(v,"AUDIO",{id:!0,style:!0,title:!0,src:!0,preload:!0});var B=z(ee);B.forEach(_),v.forEach(_),this.h()},h(){var N;E(l,"tabindex","0"),E(l,"class","btn m-1"),ye(l,"width","95%"),ye(l,"alignment","center"),E(c,"href",M=n[1].discog),E(c,"target","_blank"),E(u,"tabindex","0"),E(u,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box"),E(e,"class","dropdown dropdown-top"),ye(e,"width","100%"),E(V,"tabindex","0"),E(V,"class","btn m-1"),ye(V,"width","95%"),ye(V,"alignment","center"),E(ce,"tabindex","0"),E(ce,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"),E(w,"class","dropdown dropdown-top"),ye(w,"width","100%"),E(ee,"id","player"),ye(ee,"width","100%"),E(ee,"title",K=((N=n[0])==null?void 0:N.name)||"No track"),ee.controls=!0,Oe(ee.src,re=n[3]+"/audio/"+n[0].uuid+"."+n[4]+"?t="+n[2].token)||E(ee,"src",re),ee.autoplay="autoplay",E(ee,"preload","metadata")},m(N,R){L(N,e,R),h(e,l),h(l,i),h(l,s),h(l,o),h(l,r),h(e,f),h(e,u),h(u,b),h(b,c),h(c,p),h(c,y),h(c,A),h(c,T),h(b,U),h(b,J),h(b,ne),h(b,G),h(b,H),h(b,oe),h(b,te),h(b,q),L(N,j,R),L(N,w,R),h(w,V),h(V,Y),h(V,ue),h(V,ae),h(w,ke),h(w,ce),X.m(ce,null),L(N,fe,R),L(N,x,R),h(x,ee)},p(N,R){var se;R&2&&t!==(t=N[1].name+"")&&P(i,t),R&2&&a!==(a=N[1].year+"")&&P(o,a),R&2&&d!==(d=N[1].name+"")&&P(p,d),R&2&&m!==(m=N[1].year+"")&&P(A,m),R&2&&M!==(M=N[1].discog)&&E(c,"href",M),R&2&&Q!==(Q=N[1].obi+"")&&P(G,Q),R&2&&O!==(O=N[1].series.flatMap(At).join(", ")+"")&&P(q,O),R&1&&F!==(F=N[0].no+"")&&P(Y,F),R&1&&ie!==(ie=N[0].name+"")&&P(ae,ie),_e===(_e=W(N))&&X?X.p(N,R):(X.d(1),X=_e(N),X&&(X.c(),X.m(ce,null))),R&1&&K!==(K=((se=N[0])==null?void 0:se.name)||"No track")&&E(ee,"title",K),R&29&&!Oe(ee.src,re=N[3]+"/audio/"+N[0].uuid+"."+N[4]+"?t="+N[2].token)&&E(ee,"src",re)},d(N){N&&(_(e),_(j),_(w),_(fe),_(x)),X.d()}}}function Kt(n){let e,l=$(n[1].sections),t=[];for(let i=0;i<l.length;i+=1)t[i]=kt(mt(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Z()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);e=Z()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);L(i,e,s)},p(i,s){if(s&3){l=$(i[1].sections);let a;for(a=0;a<l.length;a+=1){const o=mt(i,l,a);t[a]?t[a].p(o,s):(t[a]=kt(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(i){i&&_(e),Ae(t,i)}}}function Qt(n){let e,l=$(n[1].sections.flatMap(Et)),t=[];for(let i=0;i<l.length;i+=1)t[i]=yt(pt(n,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Z()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);e=Z()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);L(i,e,s)},p(i,s){if(s&3){l=$(i[1].sections.flatMap(Et));let a;for(a=0;a<l.length;a+=1){const o=pt(i,l,a);t[a]?t[a].p(o,s):(t[a]=yt(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(i){i&&_(e),Ae(t,i)}}}function gt(n){let e,l,t=n[10].no+"",i,s,a=n[10].name+"",o,r,f;function u(){return n[7](n[10])}function b(){return n[8](n[10])}return{c(){e=g("li"),l=g("a"),i=I(t),s=I(". "),o=I(a)},l(c){e=k(c,"LI",{});var d=z(e);l=k(d,"A",{});var p=z(l);i=C(p,t),s=C(p,". "),o=C(p,a),p.forEach(_),d.forEach(_)},m(c,d){L(c,e,d),h(e,l),h(l,i),h(l,s),h(l,o),r||(f=[de(e,"click",u),de(e,"keypress",b)],r=!0)},p(c,d){n=c,d&2&&t!==(t=n[10].no+"")&&P(i,t),d&2&&a!==(a=n[10].name+"")&&P(o,a)},d(c){c&&_(e),r=!1,qe(f)}}}function kt(n){let e,l=n[13].name+"",t,i,s,a=$(n[13].tracks),o=[];for(let r=0;r<a.length;r+=1)o[r]=gt(bt(n,a,r));return{c(){e=g("li"),t=I(l),i=D();for(let r=0;r<o.length;r+=1)o[r].c();s=Z()},l(r){e=k(r,"LI",{});var f=z(e);t=C(f,l),f.forEach(_),i=S(r);for(let u=0;u<o.length;u+=1)o[u].l(r);s=Z()},m(r,f){L(r,e,f),h(e,t),L(r,i,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(r,f);L(r,s,f)},p(r,f){if(f&2&&l!==(l=r[13].name+"")&&P(t,l),f&3){a=$(r[13].tracks);let u;for(u=0;u<a.length;u+=1){const b=bt(r,a,u);o[u]?o[u].p(b,f):(o[u]=gt(b),o[u].c(),o[u].m(s.parentNode,s))}for(;u<o.length;u+=1)o[u].d(1);o.length=a.length}},d(r){r&&(_(e),_(i),_(s)),Ae(o,r)}}}function yt(n){let e,l,t=n[10].no+"",i,s,a=n[10].name+"",o,r,f;function u(){return n[5](n[10])}function b(){return n[6](n[10])}return{c(){e=g("li"),l=g("a"),i=I(t),s=I(". "),o=I(a)},l(c){e=k(c,"LI",{});var d=z(e);l=k(d,"A",{});var p=z(l);i=C(p,t),s=C(p,". "),o=C(p,a),p.forEach(_),d.forEach(_)},m(c,d){L(c,e,d),h(e,l),h(l,i),h(l,s),h(l,o),r||(f=[de(e,"click",u),de(e,"keypress",b)],r=!0)},p(c,d){n=c,d&2&&t!==(t=n[10].no+"")&&P(i,t),d&2&&a!==(a=n[10].name+"")&&P(o,a)},d(c){c&&_(e),r=!1,qe(f)}}}function Wt(n){let e,l="",t,i,s,a,o=n[2]&&n[0]&&vt(n);return{c(){e=g("script"),e.innerHTML=l,i=g("link"),s=D(),o&&o.c(),a=Z(),this.h()},l(r){const f=Lt("svelte-3y0lht",document.head);e=k(f,"SCRIPT",{src:!0,"data-svelte-h":!0}),he(e)!=="svelte-13dkouz"&&(e.innerHTML=l),i=k(f,"LINK",{rel:!0,href:!0}),f.forEach(_),s=S(r),o&&o.l(r),a=Z(),this.h()},h(){Oe(e.src,t="https://cdn.plyr.io/3.7.3/plyr.js")||E(e,"src",t),E(i,"rel","stylesheet"),E(i,"href","https://cdn.plyr.io/3.7.3/plyr.css")},m(r,f){h(document.head,e),h(document.head,i),L(r,s,f),o&&o.m(r,f),L(r,a,f)},p(r,[f]){r[2]&&r[0]?o?o.p(r,f):(o=vt(r),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:ge,o:ge,d(r){r&&(_(s),_(a)),_(e),_(i),o&&o.d(r)}}}const At=n=>n.name,Et=n=>n.tracks;function Xt(n,e,l){let{album:t}=e,{track:i}=e,{authorization:s=!1}=e,{endpoint:a}=e,{format:o="m4a"}=e;const r=c=>l(0,i=c),f=c=>l(0,i=c),u=c=>l(0,i=c),b=c=>l(0,i=c);return n.$$set=c=>{"album"in c&&l(1,t=c.album),"track"in c&&l(0,i=c.track),"authorization"in c&&l(2,s=c.authorization),"endpoint"in c&&l(3,a=c.endpoint),"format"in c&&l(4,o=c.format)},n.$$.update=()=>{n.$$.dirty&1&&i&&i.length},l(0,i=!1),[i,t,s,a,o,r,f,u,b]}class Zt extends ze{constructor(e){super(),Le(this,e,Xt,Wt,we,{album:1,track:0,authorization:2,endpoint:3,format:4})}}function wt(n){let e,l,t,i,s,a,o;return{c(){e=g("div"),l=g("div"),t=Ye("svg"),i=Ye("path"),s=D(),a=g("span"),o=I(n[2]),this.h()},l(r){e=k(r,"DIV",{class:!0});var f=z(e);l=k(f,"DIV",{});var u=z(l);t=Ke(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var b=z(t);i=Ke(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),z(i).forEach(_),b.forEach(_),s=S(u),a=k(u,"SPAN",{});var c=z(a);o=C(c,n[2]),c.forEach(_),u.forEach(_),f.forEach(_),this.h()},h(){E(i,"stroke-linecap","round"),E(i,"stroke-linejoin","round"),E(i,"stroke-width","2"),E(i,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"class","stroke-current flex-shrink-0 h-6 w-6"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(e,"class","alert alert-error shadow-lg")},m(r,f){L(r,e,f),h(e,l),h(l,t),h(t,i),h(l,s),h(l,a),h(a,o)},p(r,f){f&4&&P(o,r[2])},d(r){r&&_(e)}}}function $t(n){let e,l,t='<a class="btn btn-ghost normal-case text-xl" href="#">taninim</a>',i,s,a,o,r,f,u,b,c,d,p,y,m,A,T,M,U,J,ne,Q,G,H,oe,te,O,q,j="<br/> <br/> <br/>",w,V,F,Y,ue,ie,ae;function ke(v){n[14](v)}function ce(v){n[15](v)}let fe={};n[3]!==void 0&&(fe.playableAlbums=n[3]),n[0]!==void 0&&(fe.receivedAlbums=n[0]),r=new Ft({props:fe}),be.push(()=>ve(r,"playableAlbums",ke)),be.push(()=>ve(r,"receivedAlbums",ce));function x(v){n[16](v)}let ee={endpoint:Ge};n[1]!==void 0&&(ee.authorization=n[1]),d=new Yt({props:ee}),be.push(()=>ve(d,"authorization",x)),d.$on("taninimAuthorization",n[10]),d.$on("taninimUnauthorized",n[11]),d.$on("taninimUnavailable",n[12]),d.$on("taninimNotConnected",n[13]);let K=n[2]&&wt(n);function re(v){n[17](v)}let W={endpoint:zt};n[1]!==void 0&&(W.authorization=n[1]),A=new Nt({props:W}),be.push(()=>ve(A,"authorization",re)),A.$on("receivedAlbum",n[6]);function _e(v){n[18](v)}function X(v){n[19](v)}function N(v){n[20](v)}let R={endpoint:Ge};n[1]!==void 0&&(R.authorization=n[1]),n[3]!==void 0&&(R.playableAlbums=n[3]),n[0]!==void 0&&(R.receivedAlbums=n[0]),U=new Vt({props:R}),be.push(()=>ve(U,"authorization",_e)),be.push(()=>ve(U,"playableAlbums",X)),be.push(()=>ve(U,"receivedAlbums",N)),U.$on("trackSelected",n[8]),U.$on("albumDismissed",n[9]);function se(v){n[21](v)}function Ee(v){n[22](v)}let le={endpoint:Ge};n[1]!==void 0&&(le.authorization=n[1]),n[0]!==void 0&&(le.receivedAlbums=n[0]),H=new Ot({props:le}),be.push(()=>ve(H,"authorization",se)),be.push(()=>ve(H,"receivedAlbums",Ee)),H.$on("trackSelected",n[8]),H.$on("rentedAlbum",n[7]),H.$on("requestedAlbum",n[6]);function me(v){n[23](v)}function Pe(v){n[24](v)}function Ue(v){n[25](v)}let Ie={endpoint:zt};return n[1]!==void 0&&(Ie.authorization=n[1]),n[5]!==void 0&&(Ie.album=n[5]),n[4]!==void 0&&(Ie.track=n[4]),F=new Zt({props:Ie}),be.push(()=>ve(F,"authorization",me)),be.push(()=>ve(F,"album",Pe)),be.push(()=>ve(F,"track",Ue)),{c(){e=g("div"),l=g("div"),l.innerHTML=t,i=D(),s=g("div"),a=g("ul"),o=g("li"),Ne(r.$$.fragment),b=D(),c=g("li"),Ne(d.$$.fragment),y=D(),K&&K.c(),m=D(),Ne(A.$$.fragment),M=D(),Ne(U.$$.fragment),G=D(),Ne(H.$$.fragment),O=D(),q=g("div"),q.innerHTML=j,w=D(),V=g("div"),Ne(F.$$.fragment),this.h()},l(v){e=k(v,"DIV",{class:!0});var B=z(e);l=k(B,"DIV",{class:!0,"data-svelte-h":!0}),he(l)!=="svelte-189j6x"&&(l.innerHTML=t),i=S(B),s=k(B,"DIV",{class:!0});var Be=z(s);a=k(Be,"UL",{class:!0});var Ce=z(a);o=k(Ce,"LI",{});var Re=z(o);De(r.$$.fragment,Re),Re.forEach(_),b=S(Ce),c=k(Ce,"LI",{});var Te=z(c);De(d.$$.fragment,Te),Te.forEach(_),Ce.forEach(_),Be.forEach(_),B.forEach(_),y=S(v),K&&K.l(v),m=S(v),De(A.$$.fragment,v),M=S(v),De(U.$$.fragment,v),G=S(v),De(H.$$.fragment,v),O=S(v),q=k(v,"DIV",{"data-svelte-h":!0}),he(q)!=="svelte-9irkpr"&&(q.innerHTML=j),w=S(v),V=k(v,"DIV",{class:!0});var He=z(V);De(F.$$.fragment,He),He.forEach(_),this.h()},h(){E(l,"class","flex-1"),E(a,"class","menu menu-horizontal px-1"),E(s,"class","flex-none"),E(e,"class","navbar bg-base-100"),E(V,"class","btm-nav")},m(v,B){L(v,e,B),h(e,l),h(e,i),h(e,s),h(s,a),h(a,o),Se(r,o,null),h(a,b),h(a,c),Se(d,c,null),L(v,y,B),K&&K.m(v,B),L(v,m,B),Se(A,v,B),L(v,M,B),Se(U,v,B),L(v,G,B),Se(H,v,B),L(v,O,B),L(v,q,B),L(v,w,B),L(v,V,B),Se(F,V,null),ae=!0},p(v,[B]){const Be={};!f&&B&8&&(f=!0,Be.playableAlbums=v[3],pe(()=>f=!1)),!u&&B&1&&(u=!0,Be.receivedAlbums=v[0],pe(()=>u=!1)),r.$set(Be);const Ce={};!p&&B&2&&(p=!0,Ce.authorization=v[1],pe(()=>p=!1)),d.$set(Ce),v[2]?K?K.p(v,B):(K=wt(v),K.c(),K.m(m.parentNode,m)):K&&(K.d(1),K=null);const Re={};!T&&B&2&&(T=!0,Re.authorization=v[1],pe(()=>T=!1)),A.$set(Re);const Te={};!J&&B&2&&(J=!0,Te.authorization=v[1],pe(()=>J=!1)),!ne&&B&8&&(ne=!0,Te.playableAlbums=v[3],pe(()=>ne=!1)),!Q&&B&1&&(Q=!0,Te.receivedAlbums=v[0],pe(()=>Q=!1)),U.$set(Te);const He={};!oe&&B&2&&(oe=!0,He.authorization=v[1],pe(()=>oe=!1)),!te&&B&1&&(te=!0,He.receivedAlbums=v[0],pe(()=>te=!1)),H.$set(He);const Fe={};!Y&&B&2&&(Y=!0,Fe.authorization=v[1],pe(()=>Y=!1)),!ue&&B&32&&(ue=!0,Fe.album=v[5],pe(()=>ue=!1)),!ie&&B&16&&(ie=!0,Fe.track=v[4],pe(()=>ie=!1)),F.$set(Fe)},i(v){ae||(Me(r.$$.fragment,v),Me(d.$$.fragment,v),Me(A.$$.fragment,v),Me(U.$$.fragment,v),Me(H.$$.fragment,v),Me(F.$$.fragment,v),ae=!0)},o(v){je(r.$$.fragment,v),je(d.$$.fragment,v),je(A.$$.fragment,v),je(U.$$.fragment,v),je(H.$$.fragment,v),je(F.$$.fragment,v),ae=!1},d(v){v&&(_(e),_(y),_(m),_(M),_(G),_(O),_(q),_(w),_(V)),Ve(r),Ve(d),K&&K.d(v),Ve(A,v),Ve(U,v),Ve(H,v),Ve(F)}}}const zt="https://uymlm3tk5qfjvwbu73n3dd5sq40ssduo.lambda-url.eu-north-1.on.aws",Ge="https://xy7nctvhyccdaxbhyrwo57leu40nyfly.lambda-url.eu-north-1.on.aws";function xt(n,e,l){const t=w=>w&&w.uuid&&s.trackUUIDs.includes(w.uuid),i=w=>{var V,F,Y;return s&&((Y=(F=(V=w.sections)==null?void 0:V.flatMap(ue=>ue.tracks||[]))==null?void 0:F.filter(t))==null?void 0:Y.length)>0};let s=!1,a="",o=[],r,f=!1,u=!1;const b=w=>{let V=w.detail;V.__done?(l(0,o),l(2,a="")):V.__clear?(l(0,o=[]),l(2,a="")):V.__error?(console.log("Failed to load data"),console.log(V.error),l(2,a="Failed to load data")):(l(0,o=[...o,V]),l(2,a=""))},c=()=>{l(1,s)},d=({detail:w})=>{l(5,u=w.album),l(4,f=w.track)},p=()=>{l(1,s)},y=({detail:w})=>{l(1,s=w),l(2,a="")},m=({detail:w})=>{l(1,s=!1),console.log("Not auhorized"),console.log(w),l(2,a="Not authorized")},A=({detail:w})=>{l(1,s=!1),console.log("Connection failed"),console.log(w),l(2,a="Connection to servers failed")},T=({detail:w})=>{l(1,s=!1),console.log("Not connected"),console.log(w),l(2,a="Not connected")};function M(w){r=w,l(3,r),l(0,o)}function U(w){o=w,l(0,o)}function J(w){s=w,l(1,s)}function ne(w){s=w,l(1,s)}function Q(w){s=w,l(1,s)}function G(w){r=w,l(3,r),l(0,o)}function H(w){o=w,l(0,o)}function oe(w){s=w,l(1,s)}function te(w){o=w,l(0,o)}function O(w){s=w,l(1,s)}function q(w){u=w,l(5,u)}function j(w){f=w,l(4,f)}return n.$$.update=()=>{n.$$.dirty&1&&l(3,r=o.filter(i))},[o,s,a,r,f,u,b,c,d,p,y,m,A,T,M,U,J,ne,Q,G,H,oe,te,O,q,j]}class el extends ze{constructor(e){super(),Le(this,e,xt,$t,we,{})}}function tl(n){let e,l;return e=new el({}),{c(){Ne(e.$$.fragment)},l(t){De(e.$$.fragment,t)},m(t,i){Se(e,t,i),l=!0},p:ge,i(t){l||(Me(e.$$.fragment,t),l=!0)},o(t){je(e.$$.fragment,t),l=!1},d(t){Ve(e,t)}}}class il extends ze{constructor(e){super(),Le(this,e,null,tl,we,{})}}export{il as component};
